(function(e){e.fn.fixOnScroll=function(t){this.each(function(){function v(e){return typeof r[e]=="function"?r[e]():r[e]}function m(){if("top"==d&&"f-top"!=d){n.css({position:"fixed",top:v(f),bottom:"auto",left:p});d="f-top"}else if("bottom"==d&&"f-bottom"!=d){n.css({position:"fixed",top:"auto",bottom:v(a),left:p});d="f-bottom"}}function g(){if("top"==d&&"f-bottom"!=d){n.css({position:"fixed",top:"auto",bottom:v(a),left:p});d="f-bottom"}else if("bottom"==d&&"f-top"!=d){n.css({position:"fixed",top:v(f),bottom:"auto",left:p});d="f-top"}}function S(){if("top"!=d){n.css({position:y,top:b,bottom:E,left:w});d="top"}}function x(e){if("bottom"!=d){n.css({position:"relative",top:e+"px",bottom:"auto",left:w});d="top"}}function T(){var t=v(o),r=v(u),l=v(i),p=v(s),d=v(f),y=v(a),b=e("html").scrollTop()>0?e("html").scrollTop():e("body").scrollTop(),w=b+r-d-y,E=l+p,T=E-t,N=l+t;if(p<=t+d+y){return}if(r>t){if(b<l){S();return}if(b>T-d-y){x(p-t-d-y);return}m()}else{if(w<N){S();return}if(w>E-d-y){x(p-t-d-y);return}g()}c=e(window).scrollLeft();if(c!=h){n.css("left",c);h=c}}var n=e(this),r={},i="boxTop",s="boxHeight",o="blockHeight",u="viewPortHeight",a="fixedBottom",f="fixedTop",l="forceBind",c,h=0,p=n.position().left+"px",d="top";r[i]=t[i]||n.offset().top;r[s]=t[s]||n.parent().height();r[o]=t[o]||n.height()+(parseInt(n.css("marginTop"))||0)+(parseInt(n.css("marginBottom"))||0);r[u]=t[u]||function(){return e(window).height()};r[f]=t[f]||n.offset().top-v(i);r[a]=t[a]||0;r[l]=t[l]||0;var y=n.css("position"),b=n.css("top"),w=n.css("left"),E=n.css("bottom");if(v(l)||v(s)>v(o)){e(window).scroll(T).resize(T)}T()});return this}})(jQuery)