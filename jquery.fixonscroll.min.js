(function(e){e.fn.fixOnScroll=function(t){this.each(function(){function c(e){return typeof r[e]=="function"?r[e]():r[e]}function h(){if("top"==l&&"f-top"!=l){n.css({position:"fixed",top:c(f),bottom:"auto"});l="f-top"}else if("bottom"==l&&"f-bottom"!=l){n.css({position:"fixed",top:"auto",bottom:c(a)});l="f-bottom"}}function p(){if("top"==l&&"f-bottom"!=l){n.css({position:"fixed",top:"auto",bottom:c(a)});l="f-bottom"}else if("bottom"==l&&"f-top"!=l){n.css({position:"fixed",top:c(f),bottom:"auto"});l="f-top"}}function d(){if("top"!=l){n.css({position:"relative",top:"auto",bottom:"auto"});l="top"}}function v(e){if("bottom"!=l){n.css({position:"relative",top:e+"px",bottom:"auto"});l="top"}}function m(){var t=c(o),n=c(u),r=c(i),l=c(s),m=c(f),g=c(a),y=e("html").scrollTop()>0?e("html").scrollTop():e("body").scrollTop(),b=y+n-m-g,w=r+l,E=w-t,S=r+t;if(l<=t+m+g){return}if(n>t){if(y<r){d();return}if(y>E-m-g){v(l-t-m-g);return}h()}else{if(b<S){d();return}if(b>w-m-g){v(l-t-m-g);return}p()}}var n=e(this),r={},i="boxTop",s="boxHeight",o="blockHeight",u="viewPortHeight",a="fixedBottom",f="fixedTop",l="top";r[i]=t[i]||n.offset().top;r[s]=t[s]||n.parent().height();r[o]=t[o]||n.height()+parseInt(n.css("marginTop"))+parseInt(n.css("marginBottom"));r[u]=t[u]||function(){return e(window).height()};r[f]=t[f]||n.offset().top-c(i);r[a]=t[a]||0;if(c(s)>c(o)){e(window).scroll(m).resize(m)}});return this}})(jQuery)