(function(e){e.fn.fixOnScroll=function(t){this.each(function(){function d(e){return typeof r[e]=="function"?r[e]():r[e]}function v(){if("top"==p&&"f-top"!=p){n.css({position:"fixed",top:d(f),bottom:"auto"});p="f-top"}else if("bottom"==p&&"f-bottom"!=p){n.css({position:"fixed",top:"auto",bottom:d(a)});p="f-bottom"}}function m(){if("top"==p&&"f-bottom"!=p){n.css({position:"fixed",top:"auto",bottom:d(a)});p="f-bottom"}else if("bottom"==p&&"f-top"!=p){n.css({position:"fixed",top:d(f),bottom:"auto"});p="f-top"}}function w(){h=0;if("top"!=p){n.css({position:g,top:y,bottom:b,"margin-left":"auto"});p="top"}}function E(e){h=0;if("bottom"!=p){n.css({position:"relative",top:e+"px",bottom:"auto","margin-left":"auto"});p="top"}}function S(){var t=d(o),r=d(u),l=d(i),p=d(s),g=d(f),y=d(a),b=e("html").scrollTop()>0?e("html").scrollTop():e("body").scrollTop(),S=b+r-g-y,x=l+p,T=x-t,N=l+t;if(p<=t+g+y){return}if(r>t){if(b<l){w();return}if(b>T-g-y){E(p-t-g-y);return}v()}else{if(S<N){w();return}if(S>x-g-y){E(p-t-g-y);return}m()}c=e(window).scrollLeft();if(c!=h){n.css("margin-left",-c);h=c}}var n=e(this),r={},i="boxTop",s="boxHeight",o="blockHeight",u="viewPortHeight",a="fixedBottom",f="fixedTop",l="forceBind",c,h=0,p="top";r[i]=t[i]||n.offset().top;r[s]=t[s]||n.parent().height();r[o]=t[o]||n.height()+(parseInt(n.css("marginTop"))||0)+(parseInt(n.css("marginBottom"))||0);r[u]=t[u]||function(){return e(window).height()};r[f]=t[f]||n.offset().top-d(i);r[a]=t[a]||0;r[l]=t[l]||0;var g=n.css("position"),y=n.css("top"),b=n.css("bottom");if(d(l)||d(s)>d(o)){e(window).scroll(S).resize(S)}S()});return this}})(jQuery)