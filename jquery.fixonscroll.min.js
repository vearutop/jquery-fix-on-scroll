(function(e){e.fn.fixOnScroll=function(t){this.each(function(){function h(e){return typeof r[e]=="function"?r[e]():r[e]}function p(){if("top"==c&&"f-top"!=c){n.css({position:"fixed",top:h(f),bottom:"auto"});c="f-top"}else if("bottom"==c&&"f-bottom"!=c){n.css({position:"fixed",top:"auto",bottom:h(a)});c="f-bottom"}}function d(){if("top"==c&&"f-bottom"!=c){n.css({position:"fixed",top:"auto",bottom:h(a)});c="f-bottom"}else if("bottom"==c&&"f-top"!=c){n.css({position:"fixed",top:h(f),bottom:"auto"});c="f-top"}}function y(){if("top"!=c){n.css({position:v,top:m,bottom:g});c="top"}}function b(e){if("bottom"!=c){n.css({position:"relative",top:e+"px",bottom:"auto"});c="top"}}function w(){var t=h(o),n=h(u),r=h(i),l=h(s),c=h(f),v=h(a),m=e("html").scrollTop()>0?e("html").scrollTop():e("body").scrollTop(),g=m+n-c-v,w=r+l,E=w-t,S=r+t;if(l<=t+c+v){return}if(n>t){if(m<r){y();return}if(m>E-c-v){b(l-t-c-v);return}p()}else{if(g<S){y();return}if(g>w-c-v){b(l-t-c-v);return}d()}}var n=e(this),r={},i="boxTop",s="boxHeight",o="blockHeight",u="viewPortHeight",a="fixedBottom",f="fixedTop",l="forceBind",c="top";r[i]=t[i]||n.offset().top;r[s]=t[s]||n.parent().height();r[o]=t[o]||n.height()+(parseInt(n.css("marginTop"))||0)+(parseInt(n.css("marginBottom"))||0);r[u]=t[u]||function(){return e(window).height()};r[f]=t[f]||n.offset().top-h(i);r[a]=t[a]||0;r[l]=t[l]||0;var v=n.css("position"),m=n.css("top"),g=n.css("bottom");if(h(l)||h(s)>h(o)){e(window).scroll(w).resize(w)}w()});return this}})(jQuery)